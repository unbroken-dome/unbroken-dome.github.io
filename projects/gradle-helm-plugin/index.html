<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Gradle Helm Plugin</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
.hidden {
    display: none;
}

.switch {
    border-width: 1px 1px 0 1px;
    border-style: solid;
    border-color: #7a2518;
    display: inline-block;
}

.switch--item {
    padding: 10px;
    background-color: #ffffff;
    color: #7a2518;
    display: inline-block;
    cursor: pointer;
}

.switch--item.selected {
    background-color: #7a2519;
    color: #ffffff;
}

</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
<script type="text/javascript">
function addBlockSwitches() {
    $('.primary').each(function() {
        primary = $(this);
        createSwitchItem(primary, createBlockSwitch(primary)).item.addClass("selected");
        primary.children('.title').remove();
    });
    $('.secondary').each(function(idx, node) {
        secondary = $(node);
        primary = findPrimary(secondary);
        switchItem = createSwitchItem(secondary, primary.children('.switch'));
        switchItem.content.addClass('hidden');
        findPrimary(secondary).append(switchItem.content);
        secondary.remove();
    });
}

function createBlockSwitch(primary) {
    blockSwitch = $('<div class="switch"></div>');
    primary.prepend(blockSwitch);
    return blockSwitch;
}

function findPrimary(secondary) {
    candidate = secondary.prev();
    while (!candidate.is('.primary')) {
        candidate = candidate.prev();
    }
    return candidate;
}

function createSwitchItem(block, blockSwitch) {
    blockName = block.children('.title').text();
    content = block.children('.content').first().append(block.next('.colist'));
    item = $('<div class="switch--item">' + blockName + '</div>');
    item.on('click', '', content, function(e) {
        $(this).addClass('selected');
        $(this).siblings().removeClass('selected');
        e.data.siblings('.content').addClass('hidden');
        e.data.removeClass('hidden');
    });
    blockSwitch.append(item);
    return {'item': item, 'content': content};
}

$(addBlockSwitches);

</script>

</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Gradle Helm Plugin</h1>
<div class="details">
<span id="revnumber">version 0.4.4</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_quick_start">Quick Start</a></li>
<li><a href="#_plugins">Plugins</a>
<ul class="sectlevel2">
<li><a href="#_helm_commands"><code>helm-commands</code></a></li>
<li><a href="#_helm"><code>helm</code></a></li>
<li><a href="#_helm_publish"><code>helm-publish</code></a></li>
<li><a href="#_helm_releases"><code>helm-releases</code></a></li>
</ul>
</li>
<li><a href="#_configuring_the_helm_client">Configuring the Helm Client</a>
<ul class="sectlevel2">
<li><a href="#_configuring_tiller">Configuring Tiller</a></li>
</ul>
</li>
<li><a href="#_defining_charts">Defining Charts</a>
<ul class="sectlevel2">
<li><a href="#_using_the_main_chart">Using the <code>main</code> chart</a></li>
<li><a href="#_using_charts_in_a_multi_project_build">Using Charts in a Multi-Project Build</a></li>
</ul>
</li>
<li><a href="#_defining_repositories">Defining Repositories</a>
<ul class="sectlevel2">
<li><a href="#_configuring_repository_credentials">Configuring Repository Credentials</a></li>
</ul>
</li>
<li><a href="#_filtering_chart_sources">Filtering Chart Sources</a>
<ul class="sectlevel2">
<li><a href="#_configure_the_filtering_step">Configure the Filtering Step</a></li>
</ul>
</li>
<li><a href="#_linting_charts">Linting Charts</a>
<ul class="sectlevel2">
<li><a href="#_passing_values_to_the_linter">Passing Values to the Linter</a></li>
<li><a href="#_disable_the_lint_step">Disable the Lint Step</a></li>
</ul>
</li>
<li><a href="#_managing_chart_dependencies">Managing Chart Dependencies</a>
<ul class="sectlevel2">
<li><a href="#_declaring_a_dependency">Declaring a Dependency</a></li>
<li><a href="#_chart_dependencies_in_multi_project_builds">Chart Dependencies in Multi-Project Builds</a></li>
</ul>
</li>
<li><a href="#_publishing_charts">Publishing Charts</a>
<ul class="sectlevel2">
<li><a href="#_custom_repositories">Custom repositories</a></li>
<li><a href="#_specifying_credentials_for_repositories">Specifying Credentials for Repositories</a></li>
<li><a href="#_preventing_a_chart_from_being_published">Preventing a Chart from Being Published</a></li>
</ul>
</li>
<li><a href="#_managing_releases">Managing Releases</a>
<ul class="sectlevel2">
<li><a href="#_release_tasks">Release Tasks</a></li>
<li><a href="#_release_dependencies">Release Dependencies</a></li>
</ul>
</li>
<li><a href="#_using_helm_commands">Using Helm Commands</a>
<ul class="sectlevel2">
<li><a href="#_example">Example</a></li>
</ul>
</li>
<li><a href="#_configuration_from_project_properties">Configuration from Project Properties</a>
<ul class="sectlevel2">
<li><a href="#_basic_helm_properties">Basic Helm Properties</a></li>
<li><a href="#_tiller">Tiller</a></li>
<li><a href="#_repositories">Repositories</a></li>
<li><a href="#_filtering">Filtering</a></li>
<li><a href="#_linting">Linting</a></li>
<li><a href="#_releases">Releases</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This is a suite of plugins for packaging and publishing Helm Charts from Gradle, and managing Helm releases
on a Kubernetes cluster.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You need at least the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle 5.1 or higher</p>
<div class="paragraph">
<p>Since the plugin makes extensive use of Gradle&#8217;s provider/property API, including the new <code>MapProperty</code> added
in Gradle 5.1, earlier versions of Gradle are unfortunately not supported.</p>
</div>
</li>
<li>
<p>JDK 8 or higher (for running Gradle)</p>
</li>
<li>
<p>Helm CLI</p>
<div class="paragraph">
<p>This plugin delegates all <code>helm</code> commands to a locally installed Helm CLI. See
<a href="https://docs.helm.sh/using_helm/#installing-helm">Installing Helm</a> in the Helm documentation for installation
instructions on various systems.</p>
</div>
<div class="paragraph">
<p>INFO: Delegating to the Helm CLI decouples the plugin release cycle from the Helm release cycle, but it also
means that some features offered by the plugin may not be available in the CLI and vice versa.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_start"><a class="anchor" href="#_quick_start"></a>Quick Start</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apply the <code>org.unbroken-dome.helm</code> plugin to your Gradle project:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">plugins {
    id 'org.unbroken-dome.helm' version '0.4.4'
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">plugins {
    id("org.unbroken-dome.helm") version "0.4.4"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Put your Helm chart sources into <code>src/main/helm</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>📂 (project root)
    📂 src
        📂 main
            📂 helm
                📂 templates
                    📄 ...
                📄 Chart.yaml
                📄 requirements.yaml
                📄 values.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>helmPackage</code> task to build your chart.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plugins"><a class="anchor" href="#_plugins"></a>Plugins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <em>gradle-helm-plugin</em> library provides several Gradle plugins, with different use cases for each.</p>
</div>
<div class="paragraph">
<p>All plugins IDs are prefixed the namespace <code>org.unbroken-dome</code>.</p>
</div>
<div class="sect2">
<h3 id="_helm_commands"><a class="anchor" href="#_helm_commands"></a><code>helm-commands</code></h3>
<div class="paragraph">
<p>This plugin does little more than add the plugin library to your build&#8217;s classpath so you can define tasks for
 various Helm CLI commands. It creates the <code>helm</code> DSL block which you can use to configure common settings
 for all tasks, like the Helm home path and the Kubecontext. Apart from this, it does not create any tasks
 automatically.</p>
</div>
<div class="paragraph">
<p>Use this if you want to use Helm CLI commands directly as tasks, without any of the declarative DSL that the <code>helm</code>
 plugin offers.</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">plugins {
    id 'org.unbroken-dome.helm-commands' version '0.4.4'
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">plugins {
    id("org.unbroken-dome.helm-commands") version "0.4.4"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>All the other plugins imply <code>helm-commands</code>, so you don&#8217;t need to apply this plugin if you use any of the others.</p>
</div>
</div>
<div class="sect2">
<h3 id="_helm"><a class="anchor" href="#_helm"></a><code>helm</code></h3>
<div class="paragraph">
<p>This is the main plugin of the suite. It enables a variety of extra DSL blocks inside <code>helm</code>, for example <code>charts</code>
 and <code>repositories</code>.</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">plugins {
    id 'org.unbroken-dome.helm' version '0.4.4'
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">plugins {
    id("org.unbroken-dome.helm") version "0.4.4"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helm_publish"><a class="anchor" href="#_helm_publish"></a><code>helm-publish</code></h3>
<div class="paragraph">
<p>Use this plugin to publish charts to a remote chart repository like ChartMuseum.</p>
</div>
<div class="paragraph">
<p>It enables the <code>helm.publishing</code> DSL block and adds publishing tasks for each chart.</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">plugins {
    id 'org.unbroken-dome.helm-publish' version '0.4.4'
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">plugins {
    id("org.unbroken-dome.helm-publish") version "0.4.4"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helm_releases"><a class="anchor" href="#_helm_releases"></a><code>helm-releases</code></h3>
<div class="paragraph">
<p>Use this plugin to manage Helm releases (install/update/delete) on a remote Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>It enables the <code>helm.releases</code> DSL block, where you can declare your releases using Gradle DSL, referencing either
 Helm charts built using the other projects, or existing charts from a Helm repository.</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">plugins {
    id 'org.unbroken-dome.helm-releases' version '0.4.4'
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">plugins {
    id("org.unbroken-dome.helm-releases") version "0.4.4"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_the_helm_client"><a class="anchor" href="#_configuring_the_helm_client"></a>Configuring the Helm Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The global flags for Helm can be configured directly in the <code>helm</code> DSL block.</p>
</div>
<div class="paragraph">
<p>Most of these correspond to options that are passed to every Helm CLI command as a parameter
or an environment variable, or parameters that are passed to the initial <code>helm init</code> call that
sets up the local Helm environment.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As these settings can be dependent on the build environment, it is often useful to specify them in
<code>gradle.properties</code> or on the command line instead.
See <a href="#_configuration_from_project_properties">Configuration from Project Properties</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following <code>helm.home</code> sets the Helm home directory to a path inside the Gradle build directory.</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    home = file("$buildDir/helm/home")
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    home.set(file("$buildDir/helm/home"))
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Setting the Helm home directory to a path like this is actually a good practice, as it makes your
build less dependent on the local machine, and does not pollute the local Helm configuration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The plugin splits what is usually done by <code>helm init</code> into two steps:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Task <code>helmInitClient</code></dt>
<dd>
<p>This will call <code>helm init --client-only</code>, skipping a remote Tiller installation. Since this sets up the
Helm client, most other Helm tasks will have a dependency on this.</p>
</dd>
<dt class="hdlist1">Task <code>helmInitServer</code></dt>
<dd>
<p>This will call <code>helm init</code> which also installs Tiller in the remote cluster. Only tasks that actually
communicate with Tiller (like
<a href="dokka/gradle-helm-plugin/org.unbrokendome.gradle.plugins.helm.command.tasks/-helm-install/"><code>HelmInstall</code></a>
or
<a href="dokka/gradle-helm-plugin/org.unbrokendome.gradle.plugins.helm.command.tasks/-helm-delete/"><code>HelmDelete</code></a>
depend on this.</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="_configuring_tiller"><a class="anchor" href="#_configuring_tiller"></a>Configuring Tiller</h3>
<div class="paragraph">
<p>Inside the <code>helm.tiller</code> block you can configure certain settings for the remote Tiller installation.
Most of these correspond to parameters of the <code>helm init</code> CLI command.</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    tiller {
        // Install/expect Tiller in a different namespace than kube-system
        namespace = "custom-namespace"

        // Set a service account for Tiller
        serviceAccount = "tiller-service-account"
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    tiller {
        // Install/expect Tiller in a different namespace than kube-system
        namespace.set("custom-namespace")

        // Set a service account for Tiller
        serviceAccount.set("tiller-service-account")
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please refer to the
<a href="dokka/gradle-helm-plugin/org.unbrokendome.gradle.plugins.helm.dsl/-tiller/">API Reference</a> for a
full list of configuration options.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_charts"><a class="anchor" href="#_defining_charts"></a>Defining Charts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the <code>helm</code> plugin you can configure your Helm chart using a declarative DSL, and the corresponding Gradle tasks will be added automatically.</p>
</div>
<div class="paragraph">
<p>Groovy</p>
</div>
<div class="listingblock primary">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">plugins {
    id 'org.unbroken-dome.helm' version '0.4.4'
}

helm {
    charts {
        foo {
            chartName = 'foo'
            chartVersion = '1.2.3'
            sourceDir = file('src/helm')
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Kotlin</p>
</div>
<div class="listingblock secondary">
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">plugins {
    id("org.unbroken-dome.helm") version "0.4.4"
}

helm {
    charts {
        create("foo") {
            chartName.set("foo")
            chartVersion.set("1.2.3")
            sourceDir.set(file("src/helm"))
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the chart moniker used in the DSL and the actual chart name are not necessarily the same, unless you set
 them to the same value.</p>
</div>
<div class="paragraph">
<p>From the above chart definition, a number of tasks will be created automatically:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Task <code>helmFilterFooChartSources</code></dt>
<dd>
<p>Resolves placeholders in the chart sources, and copies everything to a directory <code>build/helm/foo</code> (<code>helm package</code>
requires the chart directory to have the same name as the chart).</p>
</dd>
<dt class="hdlist1">Task <code>helmBuildFooChartDependencies</code></dt>
<dd>
<p>Equivalent to the <code>helm dep build</code> CLI command.</p>
</dd>
<dt class="hdlist1">Task <code>helmLintFooChart</code></dt>
<dd>
<p>Equivalent to the <code>helm lint</code> CLI command.</p>
</dd>
<dt class="hdlist1">Task <code>helmPackageFooChart</code></dt>
<dd>
<p>Equivalent to the <code>helm package</code> CLI command.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Also, the following configurations and artifacts will be created:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Configuration <code>helmFoo</code></dt>
<dd>
<p>Contains a single artifact that has the chart directory as its output, and is built by the
<code>helmBuildFooChartDependencies</code> task.</p>
</dd>
<dt class="hdlist1">Configuration <code>helmFooPackaged</code></dt>
<dd>
<p>Contains a single artifact that has the packaged (tar.gz) chart file as its output, and is built by the
<code>helmPackageFooChart</code> task.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In addition, the plugin creates a task named <code>helmPackage</code> that will depend on all charts' package task, so it can be
used to build all the project&#8217;s charts.</p>
</div>
<div class="sect2">
<h3 id="_using_the_main_chart"><a class="anchor" href="#_using_the_main_chart"></a>Using the <code>main</code> chart</h3>
<div class="paragraph">
<p>If you don&#8217;t define any charts in the <code>helm.charts</code> DSL block, then by convention a chart named <code>main</code> will be
defined automatically, equivalent to the following:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm.charts {
    main {
        chartName = project.name
        chartVersion = project.version.toString()
        sourceDir = file('src/main/helm')
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm.charts {
    create("main") {
        chartName.set(project.name)
        chartVersion.set(project.version.toString())
        sourceDir.set(file("src/main/helm"))
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
since Helm chart versions must be SemVer-compliant, you should either make sure that the project version is a
valid SemVer, or set the main chart version to a different value.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>main</code> chart will not be instantiated if you define any other charts; however you can reference the <code>main</code> chart
to modify some of its properties:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm.charts.main.chartVersion = '1.0.0'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm.charts.named("main") {
    chartVersion.set("1.0.0")
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_charts_in_a_multi_project_build"><a class="anchor" href="#_using_charts_in_a_multi_project_build"></a>Using Charts in a Multi-Project Build</h3>
<div class="paragraph">
<p>Of course, instead of defining multiple charts in one Gradle project, you can also have a multi-project build where
each subproject defines a single <code>main</code> chart. That way, you can take advantage of the <code>main</code> chart convention in
every project.</p>
</div>
<div class="paragraph">
<p>However, note that the default values defined in the <code>helm</code> block are not automatically inherited by subprojects.
If you want to define your Helm CLI options in one central place, you can add a <code>subprojects</code> clause in the root
project:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">subprojects {
    helm.home = "${rootProject.buildDir}/helm/home"
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">subprojects {
    helm.home.set("${rootProject.buildDir}/helm/home")
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_repositories"><a class="anchor" href="#_defining_repositories"></a>Defining Repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Chart repositories are external storages of Helm charts. By default, a Helm client will know about the
<code>local</code> and <code>stable</code> repositories. You can use the <code>helm.repositories</code> block to define additional
repositories:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    repositories {
        example {
            url = uri('http://helm-repo.example.com/')
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    repositories {
        create("example") {
            url.set(uri("http://helm-repo.example.com/")
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Defining a repository will automatically add a task <code>helmAdd&lt;X&gt;Repository</code> (for example,
<code>helmAddExampleRepository</code>) that does the equivalent of <code>helm repo add</code>.</p>
</div>
<div class="sect2">
<h3 id="_configuring_repository_credentials"><a class="anchor" href="#_configuring_repository_credentials"></a>Configuring Repository Credentials</h3>
<div class="paragraph">
<p>If a chart repository requires authentication, you can configure credentials using the <code>credentials</code>
block. It works very similarly to other places in Gradle where credentials are used.</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    repositories {
        example {
            url = uri('http://helm-repo.example.com/')
            credentials {
                username = 'user'
                password = 'password'
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    repositories {
        create("example") {
            url.set(uri("http://helm-repo.example.com/")
            credentials {
                username.set("user")
                password.set("password")
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to username/password credentials, certificate credentials based on PEM files
are also supported:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.unbrokendome.gradle.plugins.helm.dsl.credentials.CertificateCredentials

helm {
    repositories {
        example {
            url = uri('http://helm-repo.example.com/')

            credentials(CertificateCredentials) {
                certificateFile = file('path/to/cert.pem')
                keyFile = file('path/to/key.pem')
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">import org.unbrokendome.gradle.plugins.helm.dsl.credentials.CertificateCredentials

helm {
    repositories {
        create("example") {
            url.set(uri("http://helm-repo.example.com/")

            credentials(CertificateCredentials::class.java) {
                certificateFile.set(file("path/to/cert.pem"))
                keyFile.set(file("path/to/key.pem"))
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_filtering_chart_sources"><a class="anchor" href="#_filtering_chart_sources"></a>Filtering Chart Sources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin includes a <em>filtering</em> step that will resolve placeholders in certain chart files before the chart
is packaged.</p>
</div>
<div class="paragraph">
<p>This is most useful to insert the name and version into the chart, because they will often correspond to the
Gradle project&#8217;s name and version:</p>
</div>
<div class="listingblock">
<div class="title">Chart.yaml</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
name: ${chartName}
version: ${chartVersion}
appVersion: ${projectVersion}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following placeholders are automatically available based on the corresponding properties of the chart in
the DSL. You can also define additional placeholders and their values using the <code>filtering.values</code> property (see below).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Placeholder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chartName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The chart name, as set by the <code>HelmChart.chartName</code> property in the build script</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chartVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The chart version, as set by the <code>HelmChart.chartVersion</code> property in the build script</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>projectVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>version</code> of the Gradle <code>Project</code> (at the time the filtering task is executed)</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Only the files <em>Chart.yaml</em>, <em>requirements.yaml</em> and <em>values.yaml</em> are filtered this way. The actual templates
in the chart are not filtered; you should use Helm&#8217;s templating constructs instead.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_configure_the_filtering_step"><a class="anchor" href="#_configure_the_filtering_step"></a>Configure the Filtering Step</h3>
<div class="paragraph">
<p>You can fine-tune the filtering process by modifying the <code>filtering</code> block, which is available both directly inside
the <code>helm</code> block, as well as each chart. The chart-level filtering inherits from the global filtering but will
override properties if they are defined in both places:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    filtering {
        // This value will be resolvable in all charts' YAML files as ${authorName}
        values.put 'authorName', 'A. U. Thor'
    }

    (charts) {
        "main" {
            filtering {
                // add a custom value that can be resolved only inside this chart's YAML files.
                values.put 'dockerImage', 'busybox'
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    filtering {
        // This value will be resolvable in all charts' YAML files as ${authorName}
        values.put("authorName", "A. U. Thor")
    }

    charts {
        main {
            filtering {
                // add a custom value that can be resolved only inside this chart's YAML files.
                values.put("dockerImage", "busybox")
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also pass a <code>Provider</code> or <code>Property</code> as the value; in this case it will be resolved lazily when the filtering
task runs.</p>
</div>
<div class="paragraph">
<p>The following properties are available in the <code>filtering</code> block:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables or disables the entire filtering step.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">placeholderPrefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string that marks the end of a resolvable placeholder inside the filtered YAML files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">placeholderSuffix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string that marks the end of a resolvable placeholder inside the filtered YAML files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The values to be resolved in placeholders.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>INFO: <code>values</code> is a <code>MapProperty</code> which merges the values from different levels of <code>filtering</code> blocks. That means
you can add some values in the global <code>helm.filtering</code> block, add some more inside the individual chart&#8217;s <code>filtering</code>
block, and they will all be available for the placeholder resolution.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_linting_charts"><a class="anchor" href="#_linting_charts"></a>Linting Charts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default workflow for building and packaging a Helm chart includes a lint step, which is
performs by the <code>HelmLint</code> task and maps to a <code>helm lint</code> CLI call.</p>
</div>
<div class="paragraph">
<p>Both the global <code>helm</code> DSL block and each <code>chart</code> block provide a nested <code>lint</code> block, where you
can fine-tune linting on a global or chart level. Each chart will inherit the global configuration
and can selectively override certain aspects of it.</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {

    // The global lint configuration applies to all charts
    lint {
        // treat linter warnings as errors (failing the build)
        strict = true
    }

    charts {
        main {
            // This configures linting only for the main chart
            lint {
                // disable strict linting only for this chart
                strict = false
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {

    // The global lint configuration applies to all charts
    lint {
        // treat linter warnings as errors (failing the build)
        strict.set(true)
    }

    (charts) {
        "main" {
            // This configures linting only for the main chart
            lint {
                // disable strict linting only for this chart
                strict.set(false)
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_passing_values_to_the_linter"><a class="anchor" href="#_passing_values_to_the_linter"></a>Passing Values to the Linter</h3>
<div class="paragraph">
<p>You can pass values to the linter using the <code>values</code> and <code>valueFiles</code>.</p>
</div>
<div class="paragraph">
<p>This may be necessary if you use the <code>required</code> function in your Helm templates (see
<a href="https://github.com/helm/helm/issues/2347">Helm issue #2347</a>). Also, it can be useful if
you have conditional templates which would not be rendered when using the default values
from values.yaml.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>helm lint</code> does not actually perform a syntactic analysis of your charts; instead it renders
the template internally (just as <code>helm install</code> would do) and checks the resulting YAML for
correctness.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Values and value files defined in the global <code>lint</code> block are automatically inherited by
each chart; however a chart can add additional values or value files.</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {

    lint {
        valueFiles.from 'src/test/helm/helm-lint-global.yaml'
    }

    charts {
        main {
            lint {
                valueFiles.from 'src/test/helm/helm-lint-main.yaml'
                values.put 'foo', 'bar'
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {

    lint {
        valueFiles.from("src/test/helm/helm-lint-global.yaml")
    }

    (charts) {
        "main" {
            lint {
                valueFiles.from("src/test/helm/helm-lint-main.yaml")
                values.put("foo", "bar")
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_disable_the_lint_step"><a class="anchor" href="#_disable_the_lint_step"></a>Disable the Lint Step</h3>
<div class="paragraph">
<p>You can disable the lint step altogether by setting the <code>lint.enabled</code> property to <code>false</code>. This
works on a global as well as on a chart level. (Again, the chart setting is inherited from the
global setting).</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {

    lint {
        // disable linting by default
        enabled = false
    }

    charts {
        main {
            // enable linting for the main chart
            lint.enabled = true
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {

    lint {
        // disable linting by default
        enabled.set(false)
    }

    (charts) {
        "main" {
            // enable linting for the main chart
            lint.enabled.set(true)
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_managing_chart_dependencies"><a class="anchor" href="#_managing_chart_dependencies"></a>Managing Chart Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>helm</code> plugin can manage your
<a href="https://docs.helm.sh/developing_charts/#chart-dependencies">chart&#8217;s dependencies</a>, modifying the
<code>requirements.yaml</code> file accordingly.</p>
</div>
<div class="paragraph">
<p>This is especially useful if you have multiple charts in the same project (or in a multi-project build)
that depend on one another, because it will also add Gradle task dependencies to make sure that the charts
are packaged in the correct order.</p>
</div>
<div class="paragraph">
<p>Note that you will still need a <code>requirements.yaml</code> file with <code>dependencies</code> entries; the plugin will not
create it automatically. For each dependency declared in the Gradle script, it will find the matching
dependency in <code>requirements.yaml</code> and modify its <code>repository</code> property.</p>
</div>
<div class="sect2">
<h3 id="_declaring_a_dependency"><a class="anchor" href="#_declaring_a_dependency"></a>Declaring a Dependency</h3>
<div class="paragraph">
<p>To declare a dependency from one chart onto another, use the <code>dependencies</code> block inside a <code>chart</code>.</p>
</div>
<div class="paragraph">
<p>The following example defines two charts <code>foo</code> and <code>bar</code>, and declares a dependency from <code>bar</code> onto <code>foo</code>:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm.charts {

    foo {
        chartVersion = '1.2.3'
        sourceDir = file('src/helm/foo')
    }

    bar {
        chartVersion = '3.2.1'
        sourceDir = file('src/helm/bar')

        dependencies {
            foo chart: 'foo'
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm.charts {

    create("foo") {
        chartVersion.set("1.2.3")
        sourceDir.set(file("src/helm/foo"))
    }

    create("bar") {
        chartVersion.set("3.2.1")
        sourceDir.set(file("src/helm/bar"))

        dependencies {
            "foo"(chart = "foo")
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The "method" name inside <code>dependencies</code> is the name that the dependency will have in the <code>requirements.yaml</code>,
whereas the <code>chart</code> parameter specifies the name of the chart in the Gradle DSL.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>dependencies</code> entry in the YAML file will be matched either by its <code>name</code> or an <code>alias</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also use an alternative syntax using <code>dependencies.add</code> if you prefer so:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">dependencies.add(name: 'foo', chart: 'foo')</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">dependencies.add(name = "foo", chart = "foo")</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting <code>requirements.yaml</code> file for the <code>bar</code> chart will look as follows:</p>
</div>
<div class="listingblock">
<div class="title">requirements.yaml</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-yaml" data-lang="yaml">dependencies:
  - name: foo
    repository: file://../foo</code></pre>
</div>
</div>
<div class="paragraph">
<p>The URL in <code>repository</code> points to the local output directory of the <code>foo</code> chart,
relative to the output directory of the <code>bar</code> chart.</p>
</div>
</div>
<div class="sect2">
<h3 id="_chart_dependencies_in_multi_project_builds"><a class="anchor" href="#_chart_dependencies_in_multi_project_builds"></a>Chart Dependencies in Multi-Project Builds</h3>
<div class="paragraph">
<p>If you have a Gradle multi-project builds, chart dependencies can also refer to charts built by
other projects.</p>
</div>
<div class="paragraph">
<p>Use the <code>project</code> parameter when adding a dependency, in addition to the <code>chart</code> parameter:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">dependencies {
    // Assuming that the foo chart is defined in the foo project
    foo project: ':foo', chart: 'foo'
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">dependencies {
    // Assuming that the foo chart is defined in the foo project
    "foo"(project = ":foo", chart = "foo")
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>chart</code> parameter defaults to <code>"main"</code>, so if a dependency references another project&#8217;s <code>main</code>
chart, the <code>chart</code> parameter can be omitted:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">dependencies {
    // Referencing the main chart in the foo project
    foo project: ':foo'
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">dependencies {
    // Referencing the main chart in the foo project
    "foo"(project = ":foo")
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_publishing_charts"><a class="anchor" href="#_publishing_charts"></a>Publishing Charts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>helm-publish</code> plugin allows you to publish your charts to remote repositories over HTTP.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There is currently no "official" API to publish Helm charts; Helm defines only how charts should be
served from a repository. <a href="https://chartmuseum.com/">ChartMuseum</a> and <a href="https://jfrog.com/artifactory/">Artifactory</a>
are two widespread Helm repository servers, and both are supported by this plugin.</p>
</div>
<div class="paragraph">
<p>For other repository types that are not directly supported, you could try using the <code>custom</code> repository type,
or consider creating a PR to add support for it.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Apply the <code>helm-publish</code> plugin to your project:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">plugins {
    id 'org.unbroken-dome.helm-publish' version '0.4.4'
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">plugins {
    id("org.unbroken-dome.helm-publish") version "0.4.4"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The plugin adds another sub-extension <code>helm.publishing</code> that lets you define the repository or
repositories to publish to:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    publishing {
        repositories {
            chartMuseum('example') {
                url = uri('http://helm-repo.example.com/')
            }
            artifactory('myRepo') {
                url = uri('http://artifactory.example.com/helm-local')
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    publishing {
        repositories {
            chartMuseum("example") {
                url.set(uri("http://helm-repo.example.com/"))
            }
            artifactory("myRepo") {
                url.set(uri("http://artifactory.example.com/helm-local"))
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will automatically define some Gradle tasks in the project:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Task <code>helmPublish</code></dt>
<dd>
<p>Publishes all charts to all repositories.</p>
</dd>
<dt class="hdlist1">Task <code>helmPublish&lt;X&gt;Chart</code></dt>
<dd>
<p>Publishes chart X to all repositories.</p>
</dd>
<dt class="hdlist1">Task <code>helmPublish&lt;X&gt;ChartTo&lt;Y&gt;Repo</code></dt>
<dd>
<p>Publishes chart X to repository Y, e.g. <code>helmPublishMainChartToExampleRepo</code>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There is no connection between the repositories in <code>helm.repositories</code> and
the publishing repositories in <code>helm.publishing.repositories</code>. The former are for retrieving
charts, the latter are for publishing them.</p>
</div>
<div class="paragraph">
<p>If you want to download from and publish to
the same external repository, you would need to specify it both in <code>helm.repositories</code> and
<code>helm.publishing.repositories</code> (similar to Gradle&#8217;s built-in publishing).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you only define a single publishing repository, the name can be omitted, in which case the name <code>"default"</code> is
used:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    publishing {
        repositories {
            artifactory {
                url = uri('http://artifactory.example.com/helm-local')
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    publishing {
        repositories {
            artifactory {
                url.set(uri("http://artifactory.example.com/helm-local"))
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following repository types are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>artifactory</code></p>
</li>
<li>
<p><code>chartMuseum</code></p>
</li>
<li>
<p><code>custom</code> (see next section)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_custom_repositories"><a class="anchor" href="#_custom_repositories"></a>Custom repositories</h3>
<div class="paragraph">
<p>If your target repository is not directly supported but involves some sort of HTTP upload, you can try the <code>custom</code>
type which offers some (limited) possibilities to configure a freestyle upload.
Use the <code>uploadMethod</code> and/or <code>uploadPath</code> properties to customize the upload request:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    publishing {
        repositories {
            custom {
                url = uri('http://artifactory.example.com/helm-local')
                uploadMethod = 'PUT'
                uploadPath = '/charts/{name}/{version}/{filename}'
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    publishing {
        repositories {
            custom {
                url.set(uri("http://helm-repo.example.com"))
                uploadMethod.set("PUT")
                uploadPath.set("/charts/{name}/{version}/{filename}")
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following placeholders can be used in the <code>uploadPath</code> property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{name}</code> will be replaced with the chart name</p>
</li>
<li>
<p><code>{version}</code> will be replaced with the chart version</p>
</li>
<li>
<p><code>{filename}</code> will be replaced with the file name of the packaged chart, i.e. <code>{name}-{version}.tgz</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_credentials_for_repositories"><a class="anchor" href="#_specifying_credentials_for_repositories"></a>Specifying Credentials for Repositories</h3>
<div class="paragraph">
<p>Most likely, a chart repository will require some credentials for write access. You can configure
credentials in the same way as for <code>repositories</code>:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    publishing {
        repositories {
            example {
                url = uri('http://helm-repo.example.com/')
                credentials {
                    username = 'user'
                    password = 'password'
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    publishing {
        repositories {
            create("example") {
                url.set(uri("http://helm-repo.example.com/"))
            }
            credentials {
                username.set("user")
                password.set("password")
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_preventing_a_chart_from_being_published"><a class="anchor" href="#_preventing_a_chart_from_being_published"></a>Preventing a Chart from Being Published</h3>
<div class="paragraph">
<p>By default, all charts defined in the project will be published. You can prevent this for a specific
chart by setting its <code>publish</code> property to <code>false</code>:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm.charts {

    // This chart will not be published
    unpublishedChart {
        // ...
        publish = false
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm.charts {

    // This chart will not be published
    create("unpublishedChart") {
        // ...
        publish = false
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_managing_releases"><a class="anchor" href="#_managing_releases"></a>Managing Releases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the <code>helm-release</code> plugin, you can manage Helm releases on a remote Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>It allows you to define your releases in the Gradle DSL, in a declarative fashion. In this way, it can
be used as an alternative to tools like <a href="https://github.com/roboll/helmfile">Helmfile</a> or
<a href="https://github.com/Praqma/Helmsman">Helmsman</a>, with the advantage of leveraging the full power of Gradle
instead of defining a custom file format.</p>
</div>
<div class="paragraph">
<p>Define your releases using the <code>helm.repositories</code> block in your Gradle script:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    releases {
        mariadb {
            from 'stable/mariadb'
            version = '5.1.1'

            // pass values (like --set on the command line)
            values = [ 'rootUser.password': 'secret' ]

            // pass value files (like -f on the command line)
            valueFiles.from 'mariadb.yaml'
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    releases {
        create("mariadb") {
            from("stable/mariadb")
            version.set("5.1.1")

            // pass values (like --set on the command line)
            values.set(mapOf("rootUser.password" to "secret"))

            // pass value files (like -f on the command line)
            valueFiles.from("mariadb.yaml")
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are quite a few properties you can set for a release; most of them correspond to a command line
option in <code>helm install</code>, <code>helm upgrade</code> or <code>helm delete</code>.</p>
</div>
<div class="paragraph">
<p>The <code>from</code> method is quite powerful, as it accepts various sources for the chart from which the release
will be created. Besides a <code>String</code> (for specifying the chart directly), it can also be a <code>File</code>,
<code>RegularFile</code>, <code>Directory</code>, <code>URI</code> or also a Gradle <code>Provider</code> of any of these types.</p>
</div>
<div class="paragraph">
<p>It is also possible to use a <code>FileCollection</code> (e.g. a Gradle <code>Configuration</code>), which should consist of
only one file. In that case, any
<a href="https://docs.gradle.org/current/javadoc/org/gradle/api/Buildable.html#getBuildDependencies--">build dependencies</a>
expressed by the <code>FileCollection</code> will be honored by the release.</p>
</div>
<div class="paragraph">
<p>Of course you can also reference charts built by the <code>helm</code> plugin, by just passing the chart&#8217;s DSL object
to <code>from</code>:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm {
    charts {
        foo {
            // configure the foo chart ...
        }
    }

    releases {
        foo {
            from charts.foo
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm {
    charts {
        create("foo") {
            // configure the foo chart ...
        }
    }

    releases {
        foo {
            from charts["foo"]
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also refer to a chart by name (and optionally project) by using the <code>chart</code> helper function:</p>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// Chart in the same project, equivalent to charts.foo
from chart('foo')

// foo chart in the foo project
from chart(project: ':foo', chart: 'foo')

// main chart in the foo project
from chart(project: ':foo')</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">// Chart in the same project, equivalent to charts["foo"]
from(chart("foo"))

// foo chart in the foo project
from(chart(project = ":foo", chart = "foo")

// main chart in the foo project
from(chart(project = ":foo"))</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_release_tasks"><a class="anchor" href="#_release_tasks"></a>Release Tasks</h3>
<div class="paragraph">
<p>For each release defined in the <code>releases</code> block, the following Gradle tasks will be generated:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Task <code>helmInstall&lt;X&gt;</code></dt>
<dd>
<p>Installs the release named X. This task will also do upgrades; depending on the <code>replace</code> property
it will either call <code>helm upgrade --install</code> (by default) or <code>helm install --replace</code>.</p>
</dd>
<dt class="hdlist1">Task <code>helmDelete&lt;X&gt;</code></dt>
<dd>
<p>Deletes the release named X (by calling <code>helm delete</code>).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In addition, there will be the following tasks to manage <em>all</em> releases in the project at once:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Task <code>helmInstall</code></dt>
<dd>
<p>Install or upgrade all releases.</p>
</dd>
<dt class="hdlist1">Task <code>helmDelete</code></dt>
<dd>
<p>Delete all releases.</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you use a chart built by the helm plugin for a release, the corresponding <code>helmInstall</code>
task will have a task dependency on the <code>helmPackage</code> task so that the chart is guaranteed to be
up to date before it is installed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_release_dependencies"><a class="anchor" href="#_release_dependencies"></a>Release Dependencies</h3>
<div class="paragraph">
<p>You can express dependencies between releases, to influence the order of installations/deletions
when using the <code>helmInstall</code> or <code>helmDelete</code> task. A release will always be installed after all
its dependencies, and deleted before its dependencies are deleted.</p>
</div>
<div class="paragraph">
<p>Currently it is not possible to define dependencies on releases in another Gradle project.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
While a release dependency influences the order of <code>install</code> invocations, it does not guarantee
that the release will be up and running on the cluster when the installation of the dependent release
begins.. By default, <code>helm install</code> does not wait until the deployment is complete&#8201;&#8212;&#8201;if this is what
you need, you can set <code>wait</code> to <code>true</code> in the release, so that the install/upgrade command is invoked
with the <code>--wait</code> flag.
</td>
</tr>
</table>
</div>
<div class="listingblock primary">
<div class="title">Groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">helm.releases {

    postgres {
        from 'stable/postgresql'
    }

    myApp {
        // ...
        dependsOn 'postgres'
    }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Kotlin</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-kotlin" data-lang="kotlin">helm.releases {

    create("postgres") {
        from("stable/postgresql")
    }

    create("myApp") {
        // ...
        dependsOn("postgres")
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_helm_commands"><a class="anchor" href="#_using_helm_commands"></a>Using Helm Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin <code>org.unbroken-dome.helm-commands</code> allows you to use Helm commands directly, similar to what you would do
with the Helm CLI. <code>helm-commands</code> is also implied by all the other plugins in the suite.</p>
</div>
<div class="paragraph">
<p>For most Helm CLI commands, there is a corresponding Gradle task type (except for commands that do not really make
sense for a build script, like <code>helm search</code> or <code>helm inspect</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In most cases it is more convenient to use the high-level DSL provided by the other plugins to manage your
charts in a declarative way.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Check the <a href="/dokka/gradle-helm-plugin/org.unbrokendome.gradle.plugins.helm.command.tasks/">API Reference</a>
for a full list of available tasks.</p>
</div>
<div class="sect2">
<h3 id="_example"><a class="anchor" href="#_example"></a>Example</h3>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.unbrokendome.gradle.plugins.helm.command.tasks.*

plugins {
    id 'org.unbroken-dome.helm-commands' version '&lt;VERSION&gt;'
}

helm {
    home = file("${project.buildDir}/helm/home")
}

task helmInit(type: HelmInit)

task installMariaDb(type: HelmInstall) {
    dependsOn helmInit
    chart = 'stable/mariadb'
    version = '4.3.1'
    releaseName = 'mariadb'
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_from_project_properties"><a class="anchor" href="#_configuration_from_project_properties"></a>Configuration from Project Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Many settings can be configured by Gradle
<a href="https://docs.gradle.org/current/userguide/build_environment.html#sec:gradle_configuration_properties">project properties</a>
instead of specifying them in the DSL. This has the advantage that you can pass them on the command line
(using <code>-P</code> switches) or a local <code>~/gradle.properties</code> file to account for different build environments.
In addition, such properties are automatically inherited by subprojects.</p>
</div>
<div class="paragraph">
<p>Some of these properties allow evaluation as a Groovy <code>GString</code>, so that you can do things like
<code>-Phelm.home=$buildDir/helm/home</code> (but the dollar signs may need to be escaped so the shell does not
treat them as environment variables).</p>
</div>
<div class="paragraph">
<p>In general, the name of the project property corresponds to the path of the property in the DSL,
e.g. <code>helm.home</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties set explicitly in your Gradle script have precedence over properties from the command line
or <code>gradle.properties</code> file, so it may be better to put them in <code>gradle.properties</code> in the first place, to
allow for easier overriding.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_basic_helm_properties"><a class="anchor" href="#_basic_helm_properties"></a>Basic Helm Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 37.5%;">
<col style="width: 50%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top"> Description</th>
<th class="tableblock halign-left valign-top">GString</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.executable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the Helm CLI executable. Defaults to <code>helm</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.debug</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable verbose output from the Helm CLI.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.home</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location of the Helm home directory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.host</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of Tiller, in the format <code>host:port</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.kubeContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the kubeconfig context to use.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.kubeConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the Kubernetes configuration file.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.timeoutSeconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout used for various Helm CLI commands.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.outputDir</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The base output directory for charts; defaults to <code>$buildDir/helm/charts</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check"></i></span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_tiller"><a class="anchor" href="#_tiller"></a>Tiller</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.tiller.install</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code>, install Tiller on the cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.tiller.namespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace of Tiller.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.tiller.forceUpgrade</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Force upgrade of Tiller to the current Helm version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.tiller.historyMax</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limit the maximum number of revisions saved per release.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.tiller.replicas</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amount of Tiller instances to run on the cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.tiller.serviceAccount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the service account to use for Tiller.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.tiller.image</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the Tiller image.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.tiller.upgrade</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upgrade if Tiller is already installed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.tiller.wait</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block until Tiller is running and ready to receive requests (defaults to <code>true</code>)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_repositories"><a class="anchor" href="#_repositories"></a>Repositories</h3>
<div class="paragraph">
<p>You can configure repositories entirely from Gradle properties&#8201;&#8212;&#8201;just the presence of a set of
<code>helm.repositories.&lt;name&gt;.&lt;xyz&gt;</code> properties will automatically create a corresponding repository.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.repository.&lt;name&gt;.url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URL of the repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.repository.&lt;name&gt;.credentials.username</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username for password-based authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.repository.&lt;name&gt;.credentials.password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for password-based authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.repository.&lt;name&gt;.credentials.certificateFile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client certificate file for certificate authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.repository.&lt;name&gt;.credentials.keyFile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Private key file for certificate authentication.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_filtering"><a class="anchor" href="#_filtering"></a>Filtering</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.filtering.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Globally enable or disable filtering. Defaults to <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.filtering.placeholderPrefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix that demarcates a placeholder in filtered YAML files. Defaults to <code>${</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.filtering.placeholderSuffix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Suffix that demarcates a placeholder in filtered YAML files. Defaults to <code>}</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_linting"><a class="anchor" href="#_linting"></a>Linting</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.lint.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Globally enable or disable linting. Defaults to <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.lint.strict</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Globally enable strict mode for linting. Defaults to <code>false</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_releases"><a class="anchor" href="#_releases"></a>Releases</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm.dryRun</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only perform a dry run when installing or deleting releases.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>| <code>helm.atomic</code>
| Perform releases atomically</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">:leveloffset!:</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.4.4<br>
Last updated 2019-01-20 23:31:23 +0100
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>prettyPrint()</script>
</body>
</html>